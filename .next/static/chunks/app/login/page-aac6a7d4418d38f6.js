(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1226:()=>{},6589:(e,s,a)=>{Promise.resolve().then(a.bind(a,4293))},4293:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var l=a(5155),t=a(2115),i=a(9606),r=a(2651),o=a(4932);function n(e){let{setUser:s}=e,[a,i]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(async()=>{let e=await fetch("/api/users");i(await e.json())})()},[]),(0,l.jsxs)("div",{className:"dashboard",children:[(0,l.jsx)("h1",{className:"title",children:"User  List"}),(0,l.jsxs)("table",{className:"userTable",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"tableHeader",children:"User  Name"}),(0,l.jsx)("th",{className:"tableHeader",children:"Email"})," "]})}),(0,l.jsx)("tbody",{children:a.map(e=>(0,l.jsxs)("tr",{className:"tableRow",children:[(0,l.jsx)("td",{className:"tableData",children:e.fullName}),(0,l.jsx)("td",{className:"tableData",children:e.email})," "]},e._id))})]}),(0,l.jsx)("button",{onClick:()=>{s(null),localStorage.removeItem("user")},className:"logoutButton",children:"Logout"})," "]})}a(5716),a(25),a(5664),a(7396),a(5521);let d=()=>{let{register:e,handleSubmit:s,setError:a,formState:{errors:d}}=(0,i.mN)(),[c,m]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[p,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=localStorage.getItem("user");e&&h(JSON.parse(e))},[]);let j=async e=>{g(!0),e.action="login";try{let s=await r.A.post("/api/auth",e,{headers:{"Content-Type":"application/json"}});o.oR.success("Login successful!",{position:"top-right"}),console.log("User logged in:",s.data),localStorage.setItem("user",JSON.stringify(s.data)),h(s.data)}catch(e){var s,l,t,i;console.error("Login failed:",e.message),o.oR.error((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Login failed. Please try again.",{position:"top-right",autoClose:12e4}),a("email",{message:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"Login failed. Please try again."})}finally{g(!1)}};return(0,l.jsx)("div",{children:u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h2",{className:"welcome",children:["Welcome, ",u.fullName,"!"]}),(0,l.jsx)(n,{setUser:h})," "]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(l.Fragment,{children:["   ",(0,l.jsx)(o.N9,{}),(0,l.jsxs)("form",{className:"login-form",onSubmit:s(j),children:[(0,l.jsx)("h2",{children:"Login"}),(0,l.jsx)("input",{...e("email",{required:"Email is required"}),className:"email-input",placeholder:"Email",type:"email",required:!0}),d.email&&(0,l.jsx)("p",{className:"error-message",children:d.email.message}),(0,l.jsxs)("div",{className:"password-container",children:[(0,l.jsx)("input",{...e("password",{required:"Password is required"}),className:"password-input",type:c?"text":"password",placeholder:"Password",required:!0}),(0,l.jsx)("button",{type:"button",onClick:()=>{m(!c)},className:"toggle-password",children:c?"Hide":"Show"})]}),(0,l.jsxs)("div",{className:"tcs",children:[(0,l.jsx)("input",{type:"checkbox",...e("terms")}),(0,l.jsx)("p",{children:"I want Promotional And Marketing emails "})]}),d.password&&(0,l.jsx)("p",{className:"error-message",children:d.password.message}),(0,l.jsx)("button",{className:"loginbutton",type:"submit",disabled:p,children:p?"Loading...":"Login"})]})]})})})}},5664:()=>{},25:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[797,760,551,396,51,521,441,517,358],()=>s(6589)),_N_E=e.O()}]);